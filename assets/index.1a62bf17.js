import{r as h,o as l,c,a as e,b as r,w as p,d as y,F as E,e as D,E as N,f as P,g as v,h as T,T as $,i as g,t as f,n as b,j as w,k as j,l as S,m as M,p as O,q,s as H}from"./vendor.4a80f84c.js";const B=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))m(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&m(n)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function m(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}};B();var u=(t,a)=>{const i=t.__vccOpts||t;for(const[m,s]of a)i[m]=s;return i};const z={},K={role:"header",class:"header fixed top-0 left-0 right-0 px-6 py-2 bg-slate-900 text-white"},I={class:"flex"},R=e("a",null,[e("div",null,"Airtable todo")],-1),U={class:"ml-auto"},J=y("Home"),G=y("Profile"),Q=y("Log in");function W(t,a,i,m,s,o){const n=h("router-link");return l(),c("header",K,[e("div",I,[R,e("div",U,[r(n,{to:"/",class:"mx-2"},{default:p(()=>[J]),_:1}),r(n,{to:"/profile",class:"mx-2"},{default:p(()=>[G]),_:1}),r(n,{to:"/login",class:"mx-2"},{default:p(()=>[Q]),_:1})])])])}var k=u(z,[["render",W]]);const Z={},V=e("h1",null,"Login",-1),Y=[V];function X(t,a,i,m,s,o){return l(),c("div",null,Y)}var ee=u(Z,[["render",X]]);const A="keyEP1Ky8tJP7sodr",F="https://api.airtable.com/v0/appVgmiQc5iKntuOo/Tasks?api_key=keyEP1Ky8tJP7sodr";var te="https://yndmitry.github.io/airtable-todo/assets/times-solid.115f5fad.svg";const se={name:"DynamicForm",components:{Field:E,Form:D,ErrorMessage:N},data(){return{schema:P().shape({name:v().required(),email:v().email().required(),spent:T().required().min(10),country:v().required()}),isStatus:null}},emits:["ldData","hide","submitAlert","setStatus"],methods:{hideForm(){this.$emit("hide")},setStatus(){this.$emit("setStatus",{status:this.isStatus})},async onSubmit(t){const a={records:[{fields:{Name:t.name,Email:t.email,Spent:t.spent,Country:t.country,Avatar:[{url:t.avatar?t.avatar:""}]}}],typecast:!0};let i=await fetch(F,{method:"POST",headers:{Authorization:"Bearer "+A,"Content-Type":"application/json"},body:JSON.stringify(a)});this.isStatus=i.ok,i.ok?(this.setStatus(),this.hideForm(),this.$emit("ldData"),this.$emit("submitAlert")):this.$emit("submitAlert")}}},oe={class:"fixed z-10"},ae={class:"bg-black/50 py-10 text-white text-center z-70 relative"},ie=e("h1",{class:"text-5xl"},"Add user",-1),ne={class:"flex flex-wrap justify-center flex-col m-auto mb-3 mx-28 text-left"},re={class:"flex flex-col mx-2 my-3 overflow-hidden relative"},le={class:"flex flex-col mx-2 my-3"},ce={class:"flex flex-col mx-2 my-3"},de={class:"flex flex-col mx-2 my-3"},me={class:"flex flex-col mx-2 my-3"},ue=e("option",{value:""},"Select country",-1),he=e("option",{value:"RU"},"Russia",-1),_e=e("option",{value:"NZ"},"New Zealand",-1),pe=e("option",{value:"USA"},"USA",-1),fe=e("option",{value:"AD"},"Amsterdam",-1),xe=e("option",{value:"GM"},"Germany",-1),ye=e("option",{value:"PS"},"Paris",-1),ve=e("button",{type:"submit",class:"w-1/6 m-auto bg-green-500 text-white py-2"}," Add ",-1),ge=e("img",{src:te,width:"25",class:"text-white"},null,-1),$e=[ge];function be(t,a,i,m,s,o){const n=h("Field"),_=h("ErrorMessage"),x=h("Form");return l(),c(g,null,[r($,{name:"pop",appear:""},{default:p(()=>[e("div",oe,[e("div",ae,[ie,r(x,{"validation-schema":s.schema,onSubmit:o.onSubmit,class:"flex flex-col justify-center p-4 text-black w-30 h-1/2 mt-9"},{default:p(()=>[e("div",ne,[e("div",re,[r(n,{name:"avatar",type:"text",placeholder:"Avatar"}),r(_,{name:"avatar",class:"text-red-400"})]),e("div",le,[r(n,{name:"name",type:"text",placeholder:"Name"}),r(_,{name:"name",class:"text-red-400"})]),e("div",ce,[r(n,{name:"email",type:"email",placeholder:"Email"}),r(_,{name:"email",class:"text-red-400"})]),e("div",de,[r(n,{name:"spent",type:"number",placeholder:"Spent"}),r(_,{name:"spent",class:"text-red-400"})]),e("div",me,[r(n,{as:"select",name:"country"},{default:p(()=>[ue,he,_e,pe,fe,xe,ye]),_:1}),r(_,{name:"country",class:"text-red-400"})])]),ve]),_:1},8,["validation-schema","onSubmit"])]),e("button",{onClick:a[0]||(a[0]=(...d)=>o.hideForm&&o.hideForm(...d)),type:"button",class:"h-6 absolute right-5 top-2 text-4xl text-white"},$e)])]),_:1}),r($,{name:"fade",appear:""},{default:p(()=>[e("div",{onClick:a[1]||(a[1]=(...d)=>o.hideForm&&o.hideForm(...d)),class:"fixed top-0 bottom-0 right-0 left-0 bg-black/80"})]),_:1})],64)}var we=u(se,[["render",be]]);const Se={data(){return{isClosed:!1}},props:{title:{type:String,required:!0},description:{type:String,required:!1},status:{type:Boolean,required:!1}},methods:{show(){this.isClosed==!1?this.isClosed=!0:this.isClosed=!1},type(t){return t===!0?"bg-green-100 border-green-400 text-green-700":"bg-red-100 border-red-400 text-red-700"}},watch:{isClosed(t){}}},ke={class:"font-bold"},Ae={class:"block sm:inline"},Fe=e("title",null,"Close",-1),Le=e("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"},null,-1),Ce=[Fe,Le];function Ee(t,a,i,m,s,o){return s.isClosed?(l(),c("div",{key:0,class:b(["border px-4 pr-12 py-3 rounded fixed top-4 right-4 z-10",o.type(t.$props.status)]),role:"alert"},[e("strong",ke,f(i.title),1),e("span",Ae,f(i.description?" "+i.description:""),1),e("span",{class:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:a[0]||(a[0]=(...n)=>o.show&&o.show(...n))},[(l(),c("svg",{class:b(["fill-current h-6 w-6 text-green-500",t.$props.status?"text-green-500":"text-red-500"]),role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},Ce,2))])],2)):w("",!0)}var De=u(Se,[["render",Ee]]);const Ne={},Pe={width:"20",height:"20","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"times",class:"svg-inline--fa fa-times fa-w-11",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},Te=e("path",{fill:"currentColor",d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},null,-1),je=[Te];function Me(t,a){return l(),c("svg",Pe,je)}var Oe=u(Ne,[["render",Me]]);const qe={name:"Home",components:{DynamicForm:we,TheAlert:De,closeIco:Oe},data(){return{isLoading:!0,tableData:null,isForm:!1,alertStatus:null,alertTitle:"Done",placeholderImage:"https://api-private.atlassian.com/users/8f525203adb5093c5954b43a5b6420c2/avatar"}},mounted(){this.loadData(),this.loading()},methods:{showAlert(){this.$refs.alert.show()},getStatus(t){return this.alertStatus=t.status},loading(){this.tableData!==null?this.isLoading=!1:this.isLoading=!0},async loadData(){let t=await fetch(F);if(t.ok){let a=await t.json();this.tableData=a.records,this.isLoading=!1}else this.alertTitle="Error "+t.status,this.alertStatus=t.ok,this.showAlert()},async remove(t,a){(await fetch(`https://api.airtable.com/v0/appVgmiQc5iKntuOo/Tasks/${t}?api_key=${A}`,{method:"DELETE"})).ok?(this.tableData.splice(a,1),this.showAlert()):(this.alertTitle="Error",this.showAlert())},showForm(){this.isForm===!1?this.isForm=!0:this.isForm=!1}}},He={class:"antialiased bg-gray-100 text-gray-600 h-screen px-4 flex items-center justify-center"},Be={class:"flex flex-col justify-center h-full w-max min-w-full"},ze={class:"w-full max-w-5xl mx-auto bg-white shadow-lg rounded-sm border border-gray-200"},Ke=e("header",{class:"px-5 py-4 border-b border-gray-100"},[e("h2",{class:"font-semibold text-gray-800"},"Customers")],-1),Ie={class:"text-center"},Re={class:"p-3"},Ue={class:"overflow-x-auto"},Je={class:"table-auto w-full"},Ge=e("thead",{class:"text-xs font-semibold uppercase text-gray-400 bg-gray-50"},[e("tr",null,[e("th",{class:"p-2 whitespace-nowrap"},[e("div",{class:"font-semibold text-left"},"Name")]),e("th",{class:"p-2 whitespace-nowrap"},[e("div",{class:"font-semibold text-left"},"Email")]),e("th",{class:"p-2 whitespace-nowrap"},[e("div",{class:"font-semibold text-left"},"Spent")]),e("th",{class:"p-2 whitespace-nowrap"},[e("div",{class:"font-semibold text-center"},"Country")]),e("th",{class:"p-2 whitespace-nowrap"},[e("div",{class:"font-semibold text-center"})])])],-1),Qe={key:0,class:"p-2 m-auto"},We={key:1,class:"p-2 mx-auto"},Ze={key:2,class:"text-sm divide-y divide-gray-100"},Ve=["id"],Ye={class:"p-2 whitespace-nowrap"},Xe={class:"flex items-center"},et={class:"w-10 h-10 flex justify-center flex-shrink-0 mr-2 sm:mr-3"},tt=["src","alt"],st={class:"font-medium text-gray-800"},ot={class:"p-2 whitespace-nowrap"},at={class:"text-left"},it={class:"p-2 whitespace-nowrap"},nt={class:"text-left font-medium text-green-500"},rt={class:"p-2 whitespace-nowrap"},lt={class:"text-lg text-center"},ct={class:"p-2 whitespace-nowrap text-center"},dt=["onClick"];function mt(t,a,i,m,s,o){const n=h("close-ico"),_=h("dynamic-form"),x=h("the-alert");return l(),c("section",He,[e("div",Be,[e("div",ze,[Ke,e("div",Ie,[e("button",{onClick:a[0]||(a[0]=(...d)=>o.showForm&&o.showForm(...d)),type:"button",class:"w-1/2 m-auto bg-green-500 text-white py-2 my-4"}," I WANT TO ADD A USER ")]),e("div",Re,[e("div",Ue,[e("table",Je,[Ge,s.isLoading?(l(),c("h1",Qe,"Loading...")):s.tableData.length<=0?(l(),c("h1",We," Customers is empty ")):(l(),c("tbody",Ze,[(l(!0),c(g,null,j(s.tableData,(d,C)=>(l(),c("tr",{key:d,id:d.id},[e("td",Ye,[e("div",Xe,[e("div",et,[e("img",{class:"rounded-full object-cover",src:d.fields.Avatar?d.fields.Avatar[0].url:s.placeholderImage,width:"40",height:"40",alt:d.fields.Name},null,8,tt)]),e("div",st,f(d.fields.Name),1)])]),e("td",ot,[e("div",at,f(d.fields.Email),1)]),e("td",it,[e("div",nt,f("$"+d.fields.Spent),1)]),e("td",rt,[e("div",lt,f(d.fields.Country?d.fields.Country:"-"),1)]),e("td",ct,[e("button",{type:"button",class:"text-lg",onClick:qt=>o.remove(d.id,C)},[r(n)],8,dt)])],8,Ve))),128))]))])])])])]),s.isForm?(l(),S(_,{key:0,onLdData:o.loadData,onHide:o.showForm,onSubmitAlert:o.showAlert,onSetStatus:o.getStatus},null,8,["onLdData","onHide","onSubmitAlert","onSetStatus"])):w("",!0),r(x,{ref:"alert",title:s.alertTitle,status:s.alertStatus},null,8,["title","status"])])}var L=u(qe,[["render",mt]]);const ut={name:"Main",components:{TheHeader:k,HomePage:L}};function ht(t,a,i,m,s,o){const n=h("the-header"),_=h("home-page");return l(),c("div",null,[r(n),r(_)])}var _t=u(ut,[["render",ht]]);const pt={},ft=e("h1",null,"Profile",-1),xt=[ft];function yt(t,a,i,m,s,o){return l(),c("div",null,xt)}var vt=u(pt,[["render",yt]]);const gt={},$t=e("h1",null,"Empty page",-1),bt=[$t];function wt(t,a,i,m,s,o){return l(),c("div",null,bt)}var St=u(gt,[["render",wt]]);const kt={components:{TheHeader:k,EmptyLayout:St,Login:ee,Main:_t,Profile:vt},data(){return{layout:null}},watch:{$route(t){if(t.meta.layout!==void 0)return this.layout=t.meta.layout;this.layout="Main"}}},At=e("div",{class:"w-form"},[e("form",{id:"email-form",name:"email-form","data-name":"Email Form",method:"get","aria-label":"Email Form"},[e("label",{for:"name"},"Name"),e("input",{type:"text",class:"w-input",maxlength:"256",name:"name","data-name":"Name",placeholder:"",id:"name"}),e("label",{for:"email"},"Email Address"),e("input",{type:"email",class:"w-input",maxlength:"256",name:"email","data-name":"Email",placeholder:"",id:"email",required:""}),e("input",{type:"submit",value:"Submit","data-wait":"Please wait...",class:"w-button"})]),e("div",{class:"w-form-done",tabindex:"-1",role:"region","aria-label":"Email Form success"},[e("div",null,"Thank you! Your submission has been received!")]),e("div",{class:"w-form-fail",tabindex:"-1",role:"region","aria-label":"Email Form failure"},[e("div",null,"Oops! Something went wrong while submitting the form.")])],-1);function Ft(t,a,i,m,s,o){const n=h("router-view");return l(),c(g,null,[(l(),S(M(s.layout),null,{default:p(()=>[r(n)]),_:1})),At],64)}var Lt=u(kt,[["render",Ft]]);const Ct={};function Et(t,a,i,m,s,o){return l(),c("div")}var Dt=u(Ct,[["render",Et]]);const Nt={};function Pt(t,a,i,m,s,o){return l(),c("div")}var Tt=u(Nt,[["render",Pt]]);const jt=[{name:"Home",path:"/",meta:{layout:"Main"},component:L},{name:"Login",path:"/login",meta:{layout:"Login"},component:Tt},{name:"Profile",path:"/profile",meta:{layout:"Profile"},component:Dt}],Mt=O(),Ot=q({history:Mt,routes:jt});H(Lt).use(Ot).mount("#app");
