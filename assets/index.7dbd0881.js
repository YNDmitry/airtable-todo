import{r as u,o as l,c,a as e,b as n,w as p,d as v,F as D,e as N,E as P,f as T,g as $,h as j,T as g,i as b,t as f,n as w,j as S,k as M,l as k,m as O,p as q,q as H,s as B}from"./vendor.4a80f84c.js";const z=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))d(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&d(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function d(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}};z();var _=(t,a)=>{const i=t.__vccOpts||t;for(const[d,s]of a)i[d]=s;return i};const K={},I={role:"header",class:"header fixed top-0 left-0 right-0 px-6 py-2 bg-slate-900 text-white"},R={class:"flex"},U=e("a",null,[e("div",null,"Airtable todo")],-1),J={class:"ml-auto"},G=v("Home"),Q=v("Profile"),W=v("Log in");function Z(t,a,i,d,s,o){const r=u("router-link");return l(),c("header",I,[e("div",R,[U,e("div",J,[n(r,{to:"/",class:"mx-2"},{default:p(()=>[G]),_:1}),n(r,{to:"/profile",class:"mx-2"},{default:p(()=>[Q]),_:1}),n(r,{to:"/login",class:"mx-2"},{default:p(()=>[W]),_:1})])])])}var F=_(K,[["render",Z]]);const V={},Y=e("h1",null,"Login",-1),X=[Y];function ee(t,a,i,d,s,o){return l(),c("div",null,X)}var te=_(V,[["render",ee]]);const A="keyEP1Ky8tJP7sodr",L="https://api.airtable.com/v0/appVgmiQc5iKntuOo/Tasks?api_key=keyEP1Ky8tJP7sodr";var se="https://yndmitry.github.io/airtable-todo/assets/times-solid.115f5fad.svg";const oe={name:"DynamicForm",components:{Field:D,Form:N,ErrorMessage:P},data(){return{schema:T().shape({name:$().required(),email:$().email().required(),spent:j().required().min(10),country:$().required()}),isStatus:null}},emits:["ldData","hide","submitAlert","setStatus"],methods:{hideForm(){this.$emit("hide")},setStatus(){this.$emit("setStatus",{status:this.isStatus})},async onSubmit(t){const a={records:[{fields:{Name:t.name,Email:t.email,Spent:t.spent,Country:t.country,Avatar:[{url:t.avatar?t.avatar:""}]}}],typecast:!0};let i=await fetch(L,{method:"POST",headers:{Authorization:"Bearer "+A,"Content-Type":"application/json"},body:JSON.stringify(a)});this.isStatus=i.ok,i.ok?(this.setStatus(),this.hideForm(),this.$emit("ldData"),this.$emit("submitAlert")):this.$emit("submitAlert")}}},ae={class:"fixed z-10"},ie={class:"bg-black/50 py-10 text-white text-center z-70 relative"},ne=e("h1",{class:"text-5xl"},"Add user",-1),re={class:"flex flex-wrap justify-center flex-col m-auto mb-3 mx-28 text-left"},le={class:"flex flex-col mx-2 my-3 overflow-hidden relative"},ce={class:"flex flex-col mx-2 my-3"},de={class:"flex flex-col mx-2 my-3"},me={class:"flex flex-col mx-2 my-3"},_e={class:"flex flex-col mx-2 my-3"},ue=e("option",{value:""},"Select country",-1),he=e("option",{value:"RU"},"Russia",-1),pe=e("option",{value:"NZ"},"New Zealand",-1),fe=e("option",{value:"USA"},"USA",-1),xe=e("option",{value:"AD"},"Amsterdam",-1),ye=e("option",{value:"GM"},"Germany",-1),ve=e("option",{value:"PS"},"Paris",-1),$e=e("button",{type:"submit",class:"w-1/6 m-auto bg-green-500 text-white py-2"}," Add ",-1),ge=e("img",{src:se,width:"25",class:"text-white"},null,-1),be=[ge];function we(t,a,i,d,s,o){const r=u("Field"),h=u("ErrorMessage"),y=u("Form");return l(),c(b,null,[n(g,{name:"pop",appear:""},{default:p(()=>[e("div",ae,[e("div",ie,[ne,n(y,{"validation-schema":s.schema,onSubmit:o.onSubmit,class:"flex flex-col justify-center p-4 text-black w-30 h-1/2 mt-9"},{default:p(()=>[e("div",re,[e("div",le,[n(r,{name:"avatar",type:"text",placeholder:"Avatar"}),n(h,{name:"avatar",class:"text-red-400"})]),e("div",ce,[n(r,{name:"name",type:"text",placeholder:"Name"}),n(h,{name:"name",class:"text-red-400"})]),e("div",de,[n(r,{name:"email",type:"email",placeholder:"Email"}),n(h,{name:"email",class:"text-red-400"})]),e("div",me,[n(r,{name:"spent",type:"number",placeholder:"Spent"}),n(h,{name:"spent",class:"text-red-400"})]),e("div",_e,[n(r,{as:"select",name:"country"},{default:p(()=>[ue,he,pe,fe,xe,ye,ve]),_:1}),n(h,{name:"country",class:"text-red-400"})])]),$e]),_:1},8,["validation-schema","onSubmit"])]),e("button",{onClick:a[0]||(a[0]=(...x)=>o.hideForm&&o.hideForm(...x)),type:"button",class:"h-6 absolute right-5 top-2 text-4xl text-white"},be)])]),_:1}),n(g,{name:"fade",appear:""},{default:p(()=>[e("div",{onClick:a[1]||(a[1]=(...x)=>o.hideForm&&o.hideForm(...x)),class:"fixed top-0 bottom-0 right-0 left-0 bg-black/80"})]),_:1})],64)}var Se=_(oe,[["render",we]]);const ke={data(){return{isClosed:!1}},props:{title:{type:String,required:!0},description:{type:String,required:!1},status:{type:Boolean,required:!1}},methods:{show(){this.isClosed==!1?this.isClosed=!0:this.isClosed=!1},type(t){return t===!0?"bg-green-100 border-green-400 text-green-700":"bg-red-100 border-red-400 text-red-700"}},watch:{isClosed(t){}}},Fe={class:"font-bold"},Ae={class:"block sm:inline"},Le=e("title",null,"Close",-1),Ce=e("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"},null,-1),Ee=[Le,Ce];function De(t,a,i,d,s,o){return s.isClosed?(l(),c("div",{key:0,class:w(["border px-4 pr-12 py-3 rounded fixed top-4 right-4 z-10",o.type(t.$props.status)]),role:"alert"},[e("strong",Fe,f(i.title),1),e("span",Ae,f(i.description?" "+i.description:""),1),e("span",{class:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:a[0]||(a[0]=(...r)=>o.show&&o.show(...r))},[(l(),c("svg",{class:w(["fill-current h-6 w-6 text-green-500",t.$props.status?"text-green-500":"text-red-500"]),role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},Ee,2))])],2)):S("",!0)}var Ne=_(ke,[["render",De]]);const Pe={},Te={width:"20",height:"20","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"times",class:"svg-inline--fa fa-times fa-w-11",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},je=e("path",{fill:"currentColor",d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},null,-1),Me=[je];function Oe(t,a){return l(),c("svg",Te,Me)}var qe=_(Pe,[["render",Oe]]);const He={},Be={class:"w-form"},ze=e("form",{id:"email-form",name:"email-form","data-name":"Email Form",method:"get","aria-label":"Email Form"},[e("label",{for:"name"},"Name"),e("input",{type:"text",class:"w-input",maxlength:"256",name:"name","data-name":"Name",placeholder:"",id:"name"}),e("label",{for:"email"},"Email Address"),e("input",{type:"email",class:"w-input",maxlength:"256",name:"email","data-name":"Email",placeholder:"",id:"email",required:""}),e("input",{type:"submit",value:"Submit","data-wait":"Please wait...",class:"w-button"})],-1),Ke=e("div",{class:"w-form-done",tabindex:"-1",role:"region","aria-label":"Email Form success"},[e("div",null,"Thank you! Your submission has been received!")],-1),Ie=e("div",{class:"w-form-fail",tabindex:"-1",role:"region","aria-label":"Email Form failure"},[e("div",null,"Oops! Something went wrong while submitting the form.")],-1),Re=[ze,Ke,Ie];function Ue(t,a,i,d,s,o){return l(),c("div",Be,Re)}var Je=_(He,[["render",Ue]]);const Ge={name:"Home",components:{DynamicForm:Se,TheAlert:Ne,closeIco:qe,TestForm:Je},data(){return{isLoading:!0,tableData:null,isForm:!1,alertStatus:null,alertTitle:"Done",placeholderImage:"https://api-private.atlassian.com/users/8f525203adb5093c5954b43a5b6420c2/avatar"}},mounted(){this.loadData(),this.loading()},methods:{showAlert(){this.$refs.alert.show()},getStatus(t){return this.alertStatus=t.status},loading(){this.tableData!==null?this.isLoading=!1:this.isLoading=!0},async loadData(){let t=await fetch(L);if(t.ok){let a=await t.json();this.tableData=a.records,this.isLoading=!1}else this.alertTitle="Error "+t.status,this.alertStatus=t.ok,this.showAlert()},async remove(t,a){(await fetch(`https://api.airtable.com/v0/appVgmiQc5iKntuOo/Tasks/${t}?api_key=${A}`,{method:"DELETE"})).ok?(this.tableData.splice(a,1),this.showAlert()):(this.alertTitle="Error",this.showAlert())},showForm(){this.isForm===!1?this.isForm=!0:this.isForm=!1}}},Qe={class:"antialiased bg-gray-100 text-gray-600 h-screen px-4 flex items-center justify-center"},We={class:"flex flex-col justify-center h-full w-max min-w-full"},Ze={class:"w-full max-w-5xl mx-auto bg-white shadow-lg rounded-sm border border-gray-200"},Ve=e("header",{class:"px-5 py-4 border-b border-gray-100"},[e("h2",{class:"font-semibold text-gray-800"},"Customers")],-1),Ye={class:"text-center"},Xe={class:"p-3"},et={class:"overflow-x-auto"},tt={class:"table-auto w-full"},st=e("thead",{class:"text-xs font-semibold uppercase text-gray-400 bg-gray-50"},[e("tr",null,[e("th",{class:"p-2 whitespace-nowrap"},[e("div",{class:"font-semibold text-left"},"Name")]),e("th",{class:"p-2 whitespace-nowrap"},[e("div",{class:"font-semibold text-left"},"Email")]),e("th",{class:"p-2 whitespace-nowrap"},[e("div",{class:"font-semibold text-left"},"Spent")]),e("th",{class:"p-2 whitespace-nowrap"},[e("div",{class:"font-semibold text-center"},"Country")]),e("th",{class:"p-2 whitespace-nowrap"},[e("div",{class:"font-semibold text-center"})])])],-1),ot={key:0,class:"p-2 m-auto"},at={key:1,class:"p-2 mx-auto"},it={key:2,class:"text-sm divide-y divide-gray-100"},nt=["id"],rt={class:"p-2 whitespace-nowrap"},lt={class:"flex items-center"},ct={class:"w-10 h-10 flex justify-center flex-shrink-0 mr-2 sm:mr-3"},dt=["src","alt"],mt={class:"font-medium text-gray-800"},_t={class:"p-2 whitespace-nowrap"},ut={class:"text-left"},ht={class:"p-2 whitespace-nowrap"},pt={class:"text-left font-medium text-green-500"},ft={class:"p-2 whitespace-nowrap"},xt={class:"text-lg text-center"},yt={class:"p-2 whitespace-nowrap text-center"},vt=["onClick"];function $t(t,a,i,d,s,o){const r=u("close-ico"),h=u("dynamic-form"),y=u("the-alert"),x=u("test-form");return l(),c("section",Qe,[e("div",We,[e("div",Ze,[Ve,e("div",Ye,[e("button",{onClick:a[0]||(a[0]=(...m)=>o.showForm&&o.showForm(...m)),type:"button",class:"w-1/2 m-auto bg-green-500 text-white py-2 my-4"}," I WANT TO ADD A USER ")]),e("div",Xe,[e("div",et,[e("table",tt,[st,s.isLoading?(l(),c("h1",ot,"Loading...")):s.tableData.length<=0?(l(),c("h1",at," Customers is empty ")):(l(),c("tbody",it,[(l(!0),c(b,null,M(s.tableData,(m,E)=>(l(),c("tr",{key:m,id:m.id},[e("td",rt,[e("div",lt,[e("div",ct,[e("img",{class:"rounded-full object-cover",src:m.fields.Avatar?m.fields.Avatar[0].url:s.placeholderImage,width:"40",height:"40",alt:m.fields.Name},null,8,dt)]),e("div",mt,f(m.fields.Name),1)])]),e("td",_t,[e("div",ut,f(m.fields.Email),1)]),e("td",ht,[e("div",pt,f("$"+m.fields.Spent),1)]),e("td",ft,[e("div",xt,f(m.fields.Country?m.fields.Country:"-"),1)]),e("td",yt,[e("button",{type:"button",class:"text-lg",onClick:Jt=>o.remove(m.id,E)},[n(r)],8,vt)])],8,nt))),128))]))])])])])]),s.isForm?(l(),k(h,{key:0,onLdData:o.loadData,onHide:o.showForm,onSubmitAlert:o.showAlert,onSetStatus:o.getStatus},null,8,["onLdData","onHide","onSubmitAlert","onSetStatus"])):S("",!0),n(y,{ref:"alert",title:s.alertTitle,status:s.alertStatus},null,8,["title","status"]),n(x)])}var C=_(Ge,[["render",$t]]);const gt={name:"Main",components:{TheHeader:F,HomePage:C}};function bt(t,a,i,d,s,o){const r=u("the-header"),h=u("home-page");return l(),c("div",null,[n(r),n(h)])}var wt=_(gt,[["render",bt]]);const St={},kt=e("h1",null,"Profile",-1),Ft=[kt];function At(t,a,i,d,s,o){return l(),c("div",null,Ft)}var Lt=_(St,[["render",At]]);const Ct={},Et=e("h1",null,"Empty page",-1),Dt=[Et];function Nt(t,a,i,d,s,o){return l(),c("div",null,Dt)}var Pt=_(Ct,[["render",Nt]]);const Tt={components:{TheHeader:F,EmptyLayout:Pt,Login:te,Main:wt,Profile:Lt},data(){return{layout:null}},watch:{$route(t){if(t.meta.layout!==void 0)return this.layout=t.meta.layout;this.layout="Main"}}};function jt(t,a,i,d,s,o){const r=u("router-view");return l(),k(O(s.layout),null,{default:p(()=>[n(r)]),_:1})}var Mt=_(Tt,[["render",jt]]);const Ot={};function qt(t,a,i,d,s,o){return l(),c("div")}var Ht=_(Ot,[["render",qt]]);const Bt={};function zt(t,a,i,d,s,o){return l(),c("div")}var Kt=_(Bt,[["render",zt]]);const It=[{name:"Home",path:"/",meta:{layout:"Main"},component:C},{name:"Login",path:"/login",meta:{layout:"Login"},component:Kt},{name:"Profile",path:"/profile",meta:{layout:"Profile"},component:Ht}],Rt=q(),Ut=H({history:Rt,routes:It});B(Mt).use(Ut).mount("#app");
