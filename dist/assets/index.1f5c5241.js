import{r as p,o as c,c as d,a as t,b as n,w as u,d as y,e as b,f as C,F as D,g as L,E,h as N,i as v,j as T,T as w,k as g,t as f,n as $,l as S,m as P,p as j,q as O,s as q}from"./vendor.e5938a24.js";const H=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))m(o);new MutationObserver(o=>{for(const e of o)if(e.type==="childList")for(const i of e.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&m(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const e={};return o.integrity&&(e.integrity=o.integrity),o.referrerpolicy&&(e.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?e.credentials="include":o.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function m(o){if(o.ep)return;o.ep=!0;const e=r(o);fetch(o.href,e)}};H();var h=(s,a)=>{const r=s.__vccOpts||s;for(const[m,o]of a)r[m]=o;return r};const B={},M={role:"header",class:"header fixed top-0 left-0 right-0 px-6 py-2 bg-slate-900 text-white"},z={class:"flex"},K=t("a",null,[t("div",null,"Airtable todo")],-1),I={class:"ml-auto"},R=y("Home"),U=y("Profile"),J=y("Log in");function G(s,a,r,m,o,e){const i=p("router-link");return c(),d("header",M,[t("div",z,[K,t("div",I,[n(i,{to:"/",class:"mx-2"},{default:u(()=>[R]),_:1}),n(i,{to:"/profile",class:"mx-2"},{default:u(()=>[U]),_:1}),n(i,{to:"/login",class:"mx-2"},{default:u(()=>[J]),_:1})])])])}var Q=h(B,[["render",G]]);const W={},Z=t("h1",null,"Empty page",-1),V=[Z];function X(s,a,r,m,o,e){return c(),d("div",null,V)}var Y=h(W,[["render",X]]);const tt={components:{TheHeader:Q,EmptyLayout:Y},computed:{layout(){return this.$route.meta.layout?this.$route.meta.layout:"EmptyLayout"}}};function et(s,a,r,m,o,e){const i=p("router-view");return c(),b(C(e.layout),null,{default:u(()=>[n(i)]),_:1})}var st=h(tt,[["render",et]]);const k="keyEP1Ky8tJP7sodr",A="https://api.airtable.com/v0/appVgmiQc5iKntuOo/Tasks?api_key=keyEP1Ky8tJP7sodr";var F="/airtable-todo/assets/times-solid.115f5fad.svg";const ot={name:"DynamicForm",components:{Field:D,Form:L,ErrorMessage:E},data(){return{schema:N().shape({name:v().required(),email:v().email().required(),spent:T().required().min(10),country:v().required()}),isStatus:null}},emits:["ldData","hide","submitAlert","setStatus"],methods:{hideForm(){this.$emit("hide")},setStatus(){this.$emit("setStatus",{status:this.isStatus})},async onSubmit(s){const a={records:[{fields:{Name:s.name,Email:s.email,Spent:s.spent,Country:s.country,Avatar:[{url:s.avatar?s.avatar:""}]}}],typecast:!0};let r=await fetch(A,{method:"POST",headers:{Authorization:"Bearer "+k,"Content-Type":"application/json"},body:JSON.stringify(a)});this.isStatus=r.ok,r.ok?(this.setStatus(),this.hideForm(),this.$emit("ldData"),this.$emit("submitAlert")):this.$emit("submitAlert")}}},at={class:"fixed z-10"},it={class:"bg-black/50 py-10 text-white text-center z-70 relative"},rt=t("h1",{class:"text-5xl"},"Add user",-1),nt={class:"flex flex-wrap justify-center flex-col m-auto mb-3 mx-28 text-left"},lt={class:"flex flex-col mx-2 my-3 overflow-hidden relative"},ct={class:"flex flex-col mx-2 my-3"},dt={class:"flex flex-col mx-2 my-3"},mt={class:"flex flex-col mx-2 my-3"},ut={class:"flex flex-col mx-2 my-3"},ht=t("option",{value:""},"Select country",-1),_t=t("option",{value:"RU"},"Russia",-1),pt=t("option",{value:"NZ"},"New Zealand",-1),ft=t("option",{value:"USA"},"USA",-1),xt=t("option",{value:"AD"},"Amsterdam",-1),yt=t("option",{value:"GM"},"Germany",-1),vt=t("option",{value:"PS"},"Paris",-1),gt=t("button",{type:"submit",class:"w-1/6 m-auto bg-green-500 text-white py-2"}," Add ",-1),bt=t("img",{src:F,width:"25",class:"text-white"},null,-1),wt=[bt];function $t(s,a,r,m,o,e){const i=p("Field"),_=p("ErrorMessage"),l=p("Form");return c(),d(g,null,[n(w,{name:"pop",appear:""},{default:u(()=>[t("div",at,[t("div",it,[rt,n(l,{"validation-schema":o.schema,onSubmit:e.onSubmit,class:"flex flex-col justify-center p-4 text-black w-30 h-1/2 mt-9"},{default:u(()=>[t("div",nt,[t("div",lt,[n(i,{name:"avatar",type:"text",placeholder:"Avatar"}),n(_,{name:"avatar",class:"text-red-400"})]),t("div",ct,[n(i,{name:"name",type:"text",placeholder:"Name"}),n(_,{name:"name",class:"text-red-400"})]),t("div",dt,[n(i,{name:"email",type:"email",placeholder:"Email"}),n(_,{name:"email",class:"text-red-400"})]),t("div",mt,[n(i,{name:"spent",type:"number",placeholder:"Spent"}),n(_,{name:"spent",class:"text-red-400"})]),t("div",ut,[n(i,{as:"select",name:"country"},{default:u(()=>[ht,_t,pt,ft,xt,yt,vt]),_:1}),n(_,{name:"country",class:"text-red-400"})])]),gt]),_:1},8,["validation-schema","onSubmit"])]),t("button",{onClick:a[0]||(a[0]=(...x)=>e.hideForm&&e.hideForm(...x)),type:"button",class:"h-6 absolute right-5 top-2 text-4xl text-white"},wt)])]),_:1}),n(w,{name:"fade",appear:""},{default:u(()=>[t("div",{onClick:a[1]||(a[1]=(...x)=>e.hideForm&&e.hideForm(...x)),class:"fixed top-0 bottom-0 right-0 left-0 bg-black/80"})]),_:1})],64)}var St=h(ot,[["render",$t]]);const kt={data(){return{isClosed:!1}},props:{title:{type:String,required:!0},description:{type:String,required:!1},status:{type:Boolean,required:!1}},methods:{show(){this.isClosed==!1?this.isClosed=!0:this.isClosed=!1},type(s){return s===!0?"bg-green-100 border-green-400 text-green-700":"bg-red-100 border-red-400 text-red-700"}},watch:{isClosed(s){}}},At={class:"font-bold"},Ft={class:"block sm:inline"},Ct=t("title",null,"Close",-1),Dt=t("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"},null,-1),Lt=[Ct,Dt];function Et(s,a,r,m,o,e){return o.isClosed?(c(),d("div",{key:0,class:$(["border px-4 pr-12 py-3 rounded fixed top-4 right-4 z-10",e.type(s.$props.status)]),role:"alert"},[t("strong",At,f(r.title),1),t("span",Ft,f(r.description?" "+r.description:""),1),t("span",{class:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:a[0]||(a[0]=(...i)=>e.show&&e.show(...i))},[(c(),d("svg",{class:$(["fill-current h-6 w-6 text-green-500",s.$props.status?"text-green-500":"text-red-500"]),role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},Lt,2))])],2)):S("",!0)}var Nt=h(kt,[["render",Et]]);const Tt={name:"Home",components:{DynamicForm:St,TheAlert:Nt},data(){return{isLoading:!0,tableData:null,isForm:!1,alertStatus:null,alertTitle:"Done",placeholderImage:"https://api-private.atlassian.com/users/8f525203adb5093c5954b43a5b6420c2/avatar"}},mounted(){this.loadData(),this.loading()},methods:{showAlert(){this.$refs.alert.show()},getStatus(s){return this.alertStatus=s.status},loading(){this.tableData!==null?this.isLoading=!1:this.isLoading=!0},async loadData(){let s=await fetch(A);if(s.ok){let a=await s.json();this.tableData=a.records,this.isLoading=!1}else this.alertTitle="Error "+s.status,this.alertStatus=s.ok,this.showAlert()},async remove(s){await fetch(`https://api.airtable.com/v0/appVgmiQc5iKntuOo/Tasks/${s}?api_key=${k}`,{method:"DELETE"});const a=this.tableData.indexOf(s,1);this.tableData.splice(a,1)},showForm(){this.isForm===!1?this.isForm=!0:this.isForm=!1}}},Pt={class:"antialiased bg-gray-100 text-gray-600 h-screen px-4 flex items-center justify-center"},jt={class:"flex flex-col justify-center h-full w-max min-w-full"},Ot={class:"w-full max-w-5xl mx-auto bg-white shadow-lg rounded-sm border border-gray-200"},qt=t("header",{class:"px-5 py-4 border-b border-gray-100"},[t("h2",{class:"font-semibold text-gray-800"},"Customers")],-1),Ht={class:"text-center"},Bt={class:"p-3"},Mt={class:"overflow-x-auto"},zt={class:"table-auto w-full"},Kt=t("thead",{class:"text-xs font-semibold uppercase text-gray-400 bg-gray-50"},[t("tr",null,[t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"Name")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"Email")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"Spent")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-center"},"Country")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-center"})])])],-1),It={key:0,class:"p-2 m-auto"},Rt={key:1,class:"p-2 mx-auto"},Ut={key:2,class:"text-sm divide-y divide-gray-100"},Jt=["id"],Gt={class:"p-2 whitespace-nowrap"},Qt={class:"flex items-center"},Wt={class:"w-10 h-10 flex justify-center flex-shrink-0 mr-2 sm:mr-3"},Zt=["src","alt"],Vt={class:"font-medium text-gray-800"},Xt={class:"p-2 whitespace-nowrap"},Yt={class:"text-left"},te={class:"p-2 whitespace-nowrap"},ee={class:"text-left font-medium text-green-500"},se={class:"p-2 whitespace-nowrap"},oe={class:"text-lg text-center"},ae={class:"p-2 whitespace-nowrap text-center"},ie=["onClick"],re=t("img",{src:F,width:"10",alt:""},null,-1),ne=[re];function le(s,a,r,m,o,e){const i=p("dynamic-form"),_=p("the-alert");return c(),d(g,null,[t("section",Pt,[t("div",jt,[t("div",Ot,[qt,t("div",Ht,[t("button",{onClick:a[0]||(a[0]=(...l)=>e.showForm&&e.showForm(...l)),type:"button",class:"w-1/2 m-auto bg-green-500 text-white py-2 my-4"}," I WANT TO ADD A USER ")]),t("div",Bt,[t("div",Mt,[t("table",zt,[Kt,o.isLoading?(c(),d("h1",It,"Loading...")):o.tableData.length<=0?(c(),d("h1",Rt," Customers is empty ")):(c(),d("tbody",Ut,[(c(!0),d(g,null,P(o.tableData,l=>(c(),d("tr",{key:l,id:l.id},[t("td",Gt,[t("div",Qt,[t("div",Wt,[t("img",{class:"rounded-full object-cover",src:l.fields.Avatar?l.fields.Avatar[0].url:o.placeholderImage,width:"40",height:"40",alt:l.fields.Name},null,8,Zt)]),t("div",Vt,f(l.fields.Name),1)])]),t("td",Xt,[t("div",Yt,f(l.fields.Email),1)]),t("td",te,[t("div",ee,f("$"+l.fields.Spent),1)]),t("td",se,[t("div",oe,f(l.fields.Country?l.fields.Country:"-"),1)]),t("td",ae,[t("button",{type:"button",class:"text-lg",onClick:x=>e.remove(l.id)},ne,8,ie)])],8,Jt))),128))]))])])])])]),o.isForm?(c(),b(i,{key:0,onLdData:e.loadData,onHide:e.showForm,onSubmitAlert:e.showAlert,onSetStatus:e.getStatus},null,8,["onLdData","onHide","onSubmitAlert","onSetStatus"])):S("",!0)]),n(_,{ref:"alert",title:o.alertTitle,status:o.alertStatus},null,8,["title","status"])],64)}var ce=h(Tt,[["render",le]]);const de={};function me(s,a,r,m,o,e){return c(),d("div")}var ue=h(de,[["render",me]]);const he={};function _e(s,a,r,m,o,e){return c(),d("div")}var pe=h(he,[["render",_e]]);const fe=[{name:"Home",path:"/",meta:{layout:"Main"},component:ce},{name:"Login",path:"/login",meta:{layout:"Login"},component:pe},{name:"Profile",path:"/profile",meta:{layout:"Profile"},component:ue}],xe=j(),ye=O({history:xe,routes:fe});q(st).use(ye).mount("#app");
